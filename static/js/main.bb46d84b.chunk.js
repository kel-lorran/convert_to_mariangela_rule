(this.webpackJsonpconvert_to_mariangela_rule=this.webpackJsonpconvert_to_mariangela_rule||[]).push([[0],{16:function(t,e,n){},18:function(t,e,n){},20:function(t,e,n){"use strict";n.r(e);var r=n(1),a=n(10),i=n.n(a),c=(n(16),n(8)),s=n.n(c),o=n(11),u=n(9),l=n(3),h=n(5),b=n(6),p=function(){function t(e,n){Object(h.a)(this,t),this.type=e,this.textContent=n,this.attributesToCreateCheckConstrainsNotNull=[],this.tableName="",this._attributesAreKey=[];var r=n.match(/(?<=TABLE\s)\w+/gim);r&&(this.tableName=r[0]),this.constrainType="";var a=n.match(/(?<=Constraint\s).+(?=\s\()/gim);"alter table"===e&&a&&(this.constrainType=a[0].replace(/^\w+\s/,""),this.attributesAreKey=this.textContent.match(new RegExp("(?<=".concat(this.constrainType,"\\s\\().+(?=\\))")))[0].trim())}return Object(b.a)(t,[{key:"attributesAreKey",get:function(){return this._attributesAreKey},set:function(t){var e;"string"===typeof t?this._attributesAreKey.push(t):(e=this._attributesAreKey).push.apply(e,Object(l.a)(t))}},{key:"getWithoutNotNullText",value:function(){var t=this;if("create table"===this.type){this.textContent=this.textContent.match(/.+\n|.+/g).reduce((function(e,n,r,a){var i=a.length;switch(r){case 0:return n.toUpperCase();case i-1:return e+n;default:var c=n.match(/\w+/);return c&&!t.attributesAreKey.includes(c[0])&&t.attributesToCreateCheckConstrainsNotNull.push(c[0]),e+n.replace(/not null/gi,"")}}),"")}return this}},{key:"generateCheckConstrainsNotNull",value:function(){var e=this;return this.attributesToCreateCheckConstrainsNotNull.map((function(n,r){return new t("alter table","ALTER TABLE ".concat(e.tableName," \n            ADD CONSTRAINT ck_").concat(n.replace(/_.+/,""),"_nn_").concat(r+1," CHECK ( ").concat(n," IS NOT NULL );"))}))}}]),t}(),f=function(){function t(e){Object(h.a)(this,t),this.lineList=e.match(/^.+TABLE[\w|\W]+?;/gm).map((function(t){return new p(t.match(/^.+TABLE/)[0].toLowerCase(),t)}))}return Object(b.a)(t,[{key:"convert",value:function(){var t={};this.lineList.filter((function(t){return"create table"===t.type})).forEach((function(e){return t[e.tableName]=e})),this.lineList.filter((function(t){return"create table"!==t.type})).forEach((function(e){var n=e.tableName,r=e.attributesAreKey;t[n].attributesAreKey=r}));var e=[],n=[];return this.lineList.filter((function(t){return"create table"===t.type})).forEach((function(t){e.push(t.getWithoutNotNullText()),n.push.apply(n,Object(l.a)(t.generateCheckConstrainsNotNull()))})),[].concat(e,Object(l.a)(this.lineList.filter((function(t){return"create table"!==t.type}))),n).map((function(t){return t.textContent})).join("\n\n")}}]),t}(),m=(n(18),n(0));var v=function(){var t=Object(r.useState)(""),e=Object(u.a)(t,2),n=e[0],a=e[1],i=Object(r.useState)(""),c=Object(u.a)(i,2),l=c[0],h=c[1],b=function(){var t=Object(o.a)(s.a.mark((function t(e){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.preventDefault();try{r=new f(n),h(r.convert())}catch(a){window.alert("Documento inserido n\xe3o corresponde com a formata\xe7\xe3o de sa\xedda do Data Modeler esperada")}case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)("h1",{children:"Converta seus arquivos .ddl gerados automaticamente pelo Oracle Data Modeler para o pad\xe3o Mariangela"}),Object(m.jsxs)("form",{onSubmit:b,onChange:function(t){var e=t.target.value;return a(e)},children:[Object(m.jsx)("textarea",{placeholder:"cole seu codigo aqui",required:!0}),Object(m.jsx)("button",{type:"submit",children:"Converter"}),Object(m.jsx)("pre",{children:l})]}),Object(m.jsx)("a",{className:"view-in-github",href:"https://github.com/kel-lorran/convert_to_mariangela_rule",children:"View ON GitHub"})]})};i.a.render(Object(m.jsx)(v,{}),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.bb46d84b.chunk.js.map